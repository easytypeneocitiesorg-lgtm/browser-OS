<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BrowserOS</title>
<style>
html,body{margin:0;padding:0;width:100%;height:100%;font-family:Arial, sans-serif;overflow:hidden;}
body{background:black;}
.screen{position:absolute;width:100%;height:100%;display:flex;justify-content:center;align-items:center;transition:opacity 0.5s;}
#bootScreen,#productKeyScreen,#desktopScreen,#shutdownScreen{display:none;flex-direction:column;color:white;}
#bootScreen,#shutdownScreen{background:#111;flex-direction:column;}
#desktopScreen{background-size:cover;background-position:center;overflow:hidden;background-image:url('https://copilot.microsoft.com/th/id/BCO.99351b73-c924-4ea6-8114-a3d2e0e35372.png');}
#desktopScreen .icon{width:80px;text-align:center;cursor:grab;position:absolute;}
#desktopScreen .icon img{width:64px;height:64px;display:block;margin:0 auto;}
#taskbar{position:absolute;bottom:0;left:0;width:100%;height:40px;background:rgba(0,0,0,0.7);display:flex;align-items:center;padding:0 5px;box-sizing:border-box;}
#startButton{width:60px;height:30px;background:#444;color:white;cursor:pointer;display:flex;justify-content:center;align-items:center;margin-right:5px;}
.window{position:absolute;background:#ddd;border:1px solid #888;width:400px;height:300px;box-shadow:2px 2px 10px rgba(0,0,0,0.5);display:flex;flex-direction:column;}
.window-header{background:#555;color:white;padding:5px;cursor:move;display:flex;justify-content:space-between;align-items:center;}
.window-content{flex:1;padding:5px;background:#fff;overflow:auto;}
.window-buttons button{margin-left:2px;}
#watermark{position:absolute;bottom:10px;right:10px;color: rgba(128,128,128,0.6);font-size:32px;pointer-events:none;z-index:9999;display:none;}
#clockWidget{position:absolute;top:5px;right:10px;color:white;font-size:16px;pointer-events:none;}
input,button,textarea{font-size:14px;}
.loading{border:8px solid #f3f3f3;border-top:8px solid #555;border-radius:50%;width:50px;height:50px;animation:spin 1s linear infinite;margin-top:20px;}
@keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
.folder-list {list-style-type:none;padding-left:0;background:#555;color:white;padding:10px;border-radius:5px;}
.folder-list li{cursor:pointer;margin:3px 0;padding:3px 5px;border-radius:3px;}
.folder-list li:hover{background:#777;}
.breadcrumbs{margin-bottom:5px;}
</style>
</head>
<body>

<!-- Boot Screen -->
<div id="bootScreen" class="screen">
  <h1>BrowserOS</h1>
  <div class="loading"></div>
</div>

<!-- Product Key Screen -->
<div id="productKeyScreen" class="screen">
  <h2>Enter Product Key</h2>
  <input type="text" id="productKeyInput" placeholder="XXXX.XXXX.XXXX.XXXX" />
  <div style="margin-top:10px;">
    <button id="submitKey">Submit</button>
    <button id="skipKey">I don't have a product key</button>
  </div>
</div>
<!-- Desktop -->
<div id="desktopScreen" class="screen">
  <div id="watermark">Activate BrowserOS</div>
  <div id="clockWidget"></div>

  <!-- Default Desktop Icons -->
  <div class="icon" id="iconCalculator" style="top:50px; left:50px;">
    <img src="https://img.icons8.com/fluency/48/calculator.png" />
    <span>Calculator</span>
  </div>
  <div class="icon" id="iconExplorer" style="top:150px; left:50px;">
    <img src="https://img.icons8.com/fluency/48/folder-invoices.png" />
    <span>File Explorer</span>
  </div>
  <div class="icon" id="iconRecycle" style="top:250px; left:50px;">
    <img src="https://img.icons8.com/fluency/48/recycle-bin.png" />
    <span>Recycle Bin</span>
  </div>
  <div class="icon" id="iconBrowser" style="top:350px; left:50px;">
    <img src="https://img.icons8.com/fluency/48/internet.png" />
    <span>Browser</span>
  </div>
  <div class="icon" id="iconWallpaper" style="top:450px; left:50px;">
    <img src="https://img.icons8.com/fluency/48/image.png" />
    <span>wallpaper.jpg</span>
  </div>

  <!-- Taskbar -->
  <div id="taskbar">
    <div id="startButton">Start</div>
    <div id="minimizedApps" style="display:flex;"></div>
    <button id="shutdownButton" style="margin-left:auto;">Shutdown</button>
  </div>
</div>

<!-- Shutdown Screen -->
<div id="shutdownScreen" class="screen">
  <h1>BrowserOS</h1>
  <div class="loading"></div>
  <p>Shutting down...</p>
</div>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const bootScreen = document.getElementById("bootScreen");
  const activationScreen = document.getElementById("activationScreen");
  const desktopScreen = document.getElementById("desktopScreen");
  const shutdownScreen = document.getElementById("shutdownScreen");
  const keysInput = document.getElementById("keysInput");
  const activationStatus = document.getElementById("activationStatus");
  const watermark = document.getElementById("watermark");

  // --- Simulated Activation Keys ---
  const validKeys = ["BROWSER-OS-123", "ACTIVATE-KEY-001", "BOS-2025-PRO"];

  // --- Boot Sequence ---
  setTimeout(() => {
    bootScreen.classList.remove("active");
    const isActivated = localStorage.getItem("browserOS_activated") === "true";
    if (isActivated) {
      desktopScreen.classList.add("active");
      watermark.style.display = "none";
    } else {
      activationScreen.classList.add("active");
    }
  }, 3500);

  // --- Activation Logic ---
  document.getElementById("activateButton").addEventListener("click", () => {
    const entered = keysInput.value.trim();
    if (validKeys.includes(entered)) {
      localStorage.setItem("browserOS_activated", "true");
      activationStatus.textContent = "Activated successfully!";
      setTimeout(() => {
        activationScreen.classList.remove("active");
        desktopScreen.classList.add("active");
        watermark.style.display = "none";
      }, 1500);
    } else {
      activationStatus.textContent = "Invalid key!";
    }
  });

  // --- Shutdown Button ---
  document.getElementById("shutdownButton").addEventListener("click", () => {
    desktopScreen.classList.remove("active");
    shutdownScreen.classList.add("active");
    setTimeout(() => {
      shutdownScreen.classList.remove("active");
      bootScreen.classList.add("active");
      setTimeout(() => location.reload(), 2500);
    }, 3000);
  });

  // --- Clock Widget ---
  const clockWidget = document.getElementById("clockWidget");
  function updateClock() {
    const now = new Date();
    const timeStr = now.toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" });
    clockWidget.textContent = timeStr;
  }
  setInterval(updateClock, 1000);
  updateClock();

  // --- Desktop Icon Click Handling ---
  document.querySelectorAll(".icon").forEach(icon => {
    icon.addEventListener("dblclick", () => {
      if (icon.id === "iconExplorer") {
        const isActivated = localStorage.getItem("browserOS_activated") === "true";
        if (!isActivated) {
          alert("File Explorer only works when BrowserOS is activated.");
          return;
        }
        openFileExplorer();
      } else if (icon.id.startsWith("fakeApp_")) {
        simulateAppRun(icon.dataset.exeName);
      } else {
        alert(`${icon.querySelector("span").textContent} opened!`);
      }
    });
  });

  // --- Fake File Explorer Function ---
  function openFileExplorer() {
    const files = JSON.parse(localStorage.getItem("browserOS_files") || "[]");
    let fileList = files.map(f => `<li>${f}</li>`).join("");
    if (!fileList) fileList = "<li>No files found.</li>";
    const explorer = window.open("", "", "width=600,height=400");
    explorer.document.write(`
      <title>File Explorer</title>
      <h3>Desktop Files</h3>
      <ul>${fileList}</ul>
    `);
  }

  // --- Simulate .exe Downloading ---
  window.simulateDownload = function(exeName, sizeMB) {
    const win = window.open("", "", "width=600,height=300");
    win.document.write(`
      <style>
        body { background: black; color: lime; font-family: monospace; padding: 20px; }
        #bar { background: lime; height: 20px; width: 0%; transition: width 0.1s; }
        #container { background: #111; width: 100%; height: 20px; margin-top: 10px; }
      </style>
      <h3>Downloading ${exeName}.exe...</h3>
      <div id="container"><div id="bar"></div></div>
      <p id="status">0%</p>
    `);

    let progress = 0;
    const downloadTime = Math.min(Math.max(sizeMB * 80, 2000), 15000); // ms
    const interval = setInterval(() => {
      progress += 2;
      win.document.getElementById("bar").style.width = progress + "%";
      win.document.getElementById("status").textContent = progress + "%";
      if (progress >= 100) {
        clearInterval(interval);
        win.document.body.innerHTML += `<p>Download complete.</p>`;
        registerFakeApp(exeName);
      }
    }, downloadTime / 50);
  };

  // --- Register Fake .exe on Desktop ---
  function registerFakeApp(exeName) {
    const icon = document.createElement("div");
    icon.className = "icon";
    icon.id = "fakeApp_" + exeName.toLowerCase().replace(/\s+/g, "_");
    icon.dataset.exeName = exeName;
    icon.style.top = `${100 + Math.random() * 400}px`;
    icon.style.left = `${200 + Math.random() * 400}px`;
    icon.innerHTML = `
      <img src="https://img.icons8.com/fluency/48/application-window.png" />
      <span>${exeName}.exe</span>
    `;
    document.getElementById("desktopScreen").appendChild(icon);
    saveFileToDesktop(`${exeName}.exe`);
    icon.addEventListener("dblclick", () => simulateAppRun(exeName));
  }

  // --- Save Fake File to "File Explorer" ---
  function saveFileToDesktop(name) {
    const files = JSON.parse(localStorage.getItem("browserOS_files") || "[]");
    if (!files.includes(name)) {
      files.push(name);
      localStorage.setItem("browserOS_files", JSON.stringify(files));
    }
  }

  // --- Simulate Running Fake App ---
  function simulateAppRun(exeName) {
    const win = window.open("", "", "width=500,height=300");
    win.document.write(`
      <style>body { background:black; color:lime; font-family:monospace; padding:20px; }</style>
      <h3>Executing ${exeName}.exe...</h3>
      <p>Loading...</p>
    `);
    setTimeout(() => {
      win.document.body.innerHTML += `<p style="color:red;">File execution error code 1: this file or program could not be executed.</p>`;
    }, 2500 + Math.random() * 2000);
  }
});
</script>
<style>
  * {
    user-select: none;
  }

  body {
    margin: 0;
    background: url("https://copilot.microsoft.com/th/id/BCO.99351b73-c924-4ea6-8114-a3d2e0e35372.png") center/cover no-repeat;
    height: 100vh;
    font-family: "Segoe UI", sans-serif;
    overflow: hidden;
  }

  .screen {
    position: absolute;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    text-align: center;
  }

  .screen.active {
    display: flex;
  }

  #bootScreen {
    background: black;
    color: white;
    font-size: 2em;
    animation: fadein 2s ease-in-out;
  }

  #activationScreen {
    background: rgba(0,0,0,0.8);
    color: white;
    flex-direction: column;
  }

  #activationScreen input {
    padding: 10px;
    font-size: 1em;
    margin-top: 10px;
    width: 250px;
    text-align: center;
  }

  #activationScreen button {
    margin-top: 10px;
    padding: 10px 20px;
    font-size: 1em;
    background: limegreen;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  }

  #activationStatus {
    margin-top: 10px;
    font-weight: bold;
  }

  #desktopScreen {
    background: rgba(0,0,0,0.1);
    position: absolute;
    inset: 0;
  }

  #watermark {
    position: absolute;
    bottom: 10px;
    right: 10px;
    color: rgba(255,255,255,0.5);
    font-size: 0.9em;
  }

  #shutdownButton {
    position: absolute;
    bottom: 20px;
    left: 20px;
    background: crimson;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
  }

  #clockWidget {
    position: absolute;
    top: 20px;
    right: 20px;
    color: white;
    font-weight: bold;
    font-size: 1.5em;
    text-shadow: 0 0 5px black;
  }

  .icon {
    position: absolute;
    width: 80px;
    text-align: center;
    cursor: pointer;
    color: white;
    font-size: 0.9em;
  }

  .icon img {
    width: 48px;
    height: 48px;
    display: block;
    margin: 0 auto 5px;
  }

  #iconExplorer {
    top: 100px;
    left: 100px;
  }

  #iconSnake {
    top: 100px;
    left: 220px;
  }

  #iconMinesweeper {
    top: 220px;
    left: 100px;
  }

  .icon span {
    display: block;
    background: rgba(0,0,0,0.4);
    padding: 2px;
    border-radius: 4px;
  }

  #iconExplorer span.gray {
    color: gray;
  }

  #shutdownScreen {
    background: black;
    color: red;
    font-size: 2em;
  }

  @keyframes fadein {
    from { opacity: 0; }
    to { opacity: 1; }
  }
</style>
</html>
