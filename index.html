<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BrowserOS</title>
<style>
  html, body {
    margin: 0; padding: 0;
    width: 100%; height: 100%;
    font-family: Arial, sans-serif;
    overflow: hidden;
  }
  body { background: black; }
  .screen { position: absolute; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; transition: opacity 0.5s; }
  #bootScreen { background: #111; color: white; flex-direction: column; }
  #productKeyScreen, #desktopScreen, #shutdownScreen { display: none; flex-direction: column; color: white; }
  #desktopScreen { background-size: cover; background-position: center; overflow: hidden; }
  #desktopScreen .icon { width: 80px; text-align: center; cursor: grab; position: absolute; }
  #desktopScreen .icon img { width: 64px; height: 64px; display: block; margin: 0 auto; }
  #taskbar { position: absolute; bottom: 0; left: 0; width: 100%; height: 40px; background: rgba(0,0,0,0.7); display: flex; align-items: center; padding: 0 5px; box-sizing: border-box; }
  #startButton { width: 60px; height: 30px; background: #444; color: white; cursor: pointer; display: flex; justify-content: center; align-items: center; margin-right: 5px; }
  .window { position: absolute; background: #ddd; border: 1px solid #888; width: 300px; height: 200px; box-shadow: 2px 2px 10px rgba(0,0,0,0.5); display: flex; flex-direction: column; }
  .window-header { background: #555; color: white; padding: 5px; cursor: move; display: flex; justify-content: space-between; align-items: center; }
  .window-content { flex: 1; padding: 5px; background: #fff; overflow: auto; }
  .window-buttons button { margin-left: 2px; }
  #watermark { position: absolute; bottom: 10px; right: 10px; color: rgba(255,0,0,0.6); font-size: 20px; pointer-events: none; z-index: 9999; }
  input, button { font-size: 14px; }
</style>
</head>
<body>

<!-- Boot Screen -->
<div id="bootScreen" class="screen">
  <h1>BrowserOS</h1>
  <p>Loading...</p>
</div>

<!-- Product Key Screen -->
<div id="productKeyScreen" class="screen">
  <h2>Enter Product Key</h2>
  <input type="text" id="productKeyInput" placeholder="XXXX.XXXX.XXXX.XXXX" />
  <div style="margin-top:10px;">
    <button id="submitKey">Submit</button>
    <button id="skipKey">I don't have a product key</button>
  </div>
</div>

<!-- Desktop -->
<div id="desktopScreen" class="screen">
  <div id="watermark">Activate BrowserOS</div>
  <div class="icon" id="iconCalculator" style="top:50px; left:50px;">
    <img src="https://img.icons8.com/fluency/48/calculator.png" />
    <span>Calculator</span>
  </div>
  <div class="icon" id="iconExplorer" style="top:150px; left:50px;">
    <img src="https://img.icons8.com/fluency/48/folder-invoices.png" />
    <span>File Explorer</span>
  </div>
  <div class="icon" id="iconRecycle" style="top:250px; left:50px;">
    <img src="https://img.icons8.com/fluency/48/recycle-bin.png" />
    <span>Recycle Bin</span>
  </div>
  <div class="icon" id="iconBrowser" style="top:350px; left:50px;">
    <img src="https://img.icons8.com/fluency/48/internet.png" />
    <span>Browser</span>
  </div>
  <div class="icon" id="iconWallpaper" style="top:450px; left:50px; cursor:pointer;">
    <img src="https://img.icons8.com/fluency/48/image.png" />
    <span>wallpaper.jpg</span>
  </div>

  <!-- Taskbar -->
  <div id="taskbar">
    <div id="startButton">Start</div>
    <div id="minimizedApps" style="display:flex;"></div>
    <button id="shutdownButton" style="margin-left:auto;">Shutdown</button>
  </div>
</div>

<!-- Shutdown Screen -->
<div id="shutdownScreen" class="screen">
  <h1>BrowserOS</h1>
  <p>Shutting down...</p>
</div>

<script>
let productKeyValid = false;
let minimizedWindows = [];
const validKey = "EXAMPLE.PRODUCT.KEY.VALUE";

// Boot sequence
setTimeout(() => {
  document.getElementById('bootScreen').style.opacity = 0;
  setTimeout(() => {
    document.getElementById('bootScreen').style.display = 'none';
    document.getElementById('productKeyScreen').style.display = 'flex';
    document.getElementById('productKeyScreen').style.opacity = 1;
  }, 500);
}, 7000);

// Product Key
document.getElementById('submitKey').addEventListener('click', () => {
  const key = document.getElementById('productKeyInput').value.trim();
  if(key === validKey){
    productKeyValid = true;
    startDesktop();
  } else {
    alert("Invalid key!");
  }
});
document.getElementById('skipKey').addEventListener('click', () => {
  productKeyValid = false;
  startDesktop();
});

function startDesktop(){
  document.getElementById('productKeyScreen').style.opacity = 0;
  setTimeout(() => {
    document.getElementById('productKeyScreen').style.display = 'none';
    document.getElementById('desktopScreen').style.display = 'flex';
    document.getElementById('desktopScreen').style.opacity = 1;
    if(!productKeyValid){
      document.getElementById('watermark').style.display = 'block';
    } else {
      document.getElementById('watermark').style.display = 'none';
    }
  }, 500);
}

// Shutdown
document.getElementById('shutdownButton').addEventListener('click', () => {
  document.getElementById('desktopScreen').style.opacity = 0;
  setTimeout(() => {
    document.getElementById('desktopScreen').style.display = 'none';
    document.getElementById('shutdownScreen').style.display = 'flex';
    setTimeout(()=>{},5000);
  },500);
});

// Drag & Drop
const icons = document.querySelectorAll('#desktopScreen .icon');
icons.forEach(icon => {
  icon.onmousedown = function(e) {
    if(icon.id === "iconWallpaper" && !productKeyValid){
      alert("Enter product key to change wallpaper.");
      return;
    }
    let shiftX = e.clientX - icon.getBoundingClientRect().left;
    let shiftY = e.clientY - icon.getBoundingClientRect().top;

    function moveAt(pageX, pageY) {
      icon.style.left = pageX - shiftX + 'px';
      icon.style.top = pageY - shiftY + 'px';
    }

    function onMouseMove(e) {
      moveAt(e.pageX, e.pageY);
    }
    document.addEventListener('mousemove', onMouseMove);
    icon.onmouseup = function() {
      document.removeEventListener('mousemove', onMouseMove);
      icon.onmouseup = null;
    };
  };
  icon.ondragstart = function() {
    return false;
  };
});

// Wallpaper change
document.getElementById('iconWallpaper').addEventListener('dblclick', ()=>{
  if(!productKeyValid) return;
  const url = prompt("Enter image URL or leave blank to upload a local file:");
  if(url){
    document.getElementById('desktopScreen').style.backgroundImage = `url(${url})`;
  }
});

// Simple windows
function createWindow(title, content){
  const win = document.createElement('div');
  win.className = 'window';
  win.style.top = '100px';
  win.style.left = '100px';

  const header = document.createElement('div');
  header.className = 'window-header';
  header.innerHTML = `<span>${title}</span>`;
  const buttons = document.createElement('div');
  buttons.className = 'window-buttons';
  const minBtn = document.createElement('button'); minBtn.textContent='—';
  const closeBtn = document.createElement('button'); closeBtn.textContent='✕';
  buttons.appendChild(minBtn); buttons.appendChild(closeBtn);
  header.appendChild(buttons);
  win.appendChild(header);

  const contentDiv = document.createElement('div');
  contentDiv.className = 'window-content';
  contentDiv.innerHTML = content;
  win.appendChild(contentDiv);
  document.getElementById('desktopScreen').appendChild(win);

  // Drag
  header.onmousedown = function(e){
    let shiftX = e.clientX - win.getBoundingClientRect().left;
    let shiftY = e.clientY - win.getBoundingClientRect().top;
    function moveAt(pageX,pageY){ win.style.left = pageX-shiftX+'px'; win.style.top = pageY-shiftY+'px';}
    function onMouseMove(e){ moveAt(e.pageX,e.pageY);}
    document.addEventListener('mousemove',onMouseMove);
    document.onmouseup = function(){ document.removeEventListener('mousemove',onMouseMove); document.onmouseup=null;}
  };
  header.ondragstart = () => false;

  // Close
  closeBtn.addEventListener('click', ()=>{
    win.remove();
  });

  // Minimize
  minBtn.addEventListener('click', ()=>{
    win.style.display='none';
    const taskbar = document.getElementById('minimizedApps');
    const tbIcon = document.createElement('button');
    tbIcon.textContent=title;
    tbIcon.addEventListener('click', ()=>{
      win.style.display='flex';
      taskbar.removeChild(tbIcon);
    });
    taskbar.appendChild(tbIcon);
  });
}

// Open apps
document.getElementById('iconCalculator').addEventListener('dblclick', ()=>{ createWindow("Calculator","<p>Calculator app here</p>"); });
document.getElementById('iconExplorer').addEventListener('dblclick', ()=>{ createWindow("File Explorer","<p>File Explorer app here</p>"); });
document.getElementById('iconBrowser').addEventListener('dblclick', ()=>{ createWindow("Internet Browser","<iframe src='https://example.com' style='width:100%;height:100%;'></iframe>"); });
</script>
</body>
</html>
